<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8"/>
<meta name="viewport" content="width=device-width,initial-scale=1"/>
<title>Weekly Work Scheduler — Modern Drag & Drop</title>
<style>
  :root {
    --bg: #f4f4f4; --card: #fff; --text: #222; --muted: #666; --accent: #007BFF;
    --danger: #ff4d4f; --success: #198754;
  }
  body { font-family: Inter, Arial, sans-serif; margin:20px auto; max-width:1200px; padding:0 12px; background:var(--bg); color:var(--text); transition:0.2s;}
  body.dark { --bg:#0f0f10; --card:#161616; --text:#e6e6e6; --muted:#999; --accent:#4ea6ff; }
  h1,h2{ margin:0 0 8px 0; }
  section{ background:var(--card); padding:14px; margin-bottom:16px; border-radius:10px; box-shadow:0 2px 10px rgba(0,0,0,0.06); }
  .input-group{ display:flex; gap:8px; flex-wrap:wrap; align-items:center; }
  input[type="text"], input[type="number"], select{ padding:6px 8px; border-radius:6px; border:1px solid #ddd; min-width:140px; }
  button{ padding:6px 10px; border-radius:6px; border:none; background:var(--accent); color:#fff; cursor:pointer; }
  button.secondary{ background:#6c757d; }
  button.danger{ background:var(--danger); }
  button[disabled]{ opacity:.6; cursor:not-allowed; }
  table{ width:100%; border-collapse:collapse; margin-top:10px; }
  th,td{ border:1px solid #e6e6e6; padding:8px; text-align:center; min-width:60px; }
  th{ background:#f6f8fb; }
  .remove-btn{ background:transparent; border:1px solid transparent; color:var(--danger); padding:4px 8px; border-radius:6px; }
  .remove-btn:hover{ background:var(--danger); color:#fff; }
  .person-list-item{ display:flex; align-items:center; gap:8px; padding:6px 8px; border-radius:6px; border:1px solid #eee; margin-bottom:6px; justify-content:space-between; }
  .kitchen-task{ background:#d1e7dd; }
  .work-task{ background:#f8d7da; }
  .avail-cell{ min-width:80px; padding:6px; cursor:pointer; }
  .schedule-cell{ min-width:60px; min-height:30px; display:flex; align-items:center; justify-content:center; cursor:pointer; }
  .schedule-cell.drag-over{ outline: 2px dashed var(--accent); }
  .fairness-box{ margin-top:12px; padding:8px; border-radius:8px; background:#eef6ff; }
  @media (max-width:768px){ .table-scroll{ overflow-x:auto; } }
  .modal-backdrop{ position:fixed; inset:0; background:rgba(0,0,0,0.32); display:flex; align-items:flex-start; justify-content:center; z-index:9998; padding:20px; }
  .modal{ background:var(--card); color:var(--text); border-radius:8px; padding:12px; max-width:420px; width:100%; box-shadow:0 10px 40px rgba(0,0,0,0.25); }
  .sr-only{ position:absolute !important; left:-10000px; top:auto; width:1px; height:1px; overflow:hidden; }
  .drag-item{ padding:2px 6px; border-radius:4px; background:#d0e7ff; margin:1px; cursor:grab; }
</style>
</head>
<body>
<h1>Weekly Work Scheduler — Drag & Drop</h1>
<section id="people-section" aria-labelledby="people-h">
  <h2 id="people-h">People</h2>
  <div class="input-group">
    <label for="person-name" class="sr-only">Person name</label>
    <input id="person-name" type="text" placeholder="Enter name" autocomplete="off" />
    <label for="person-gender" class="sr-only">Gender</label>
    <select id="person-gender">
      <option value="Male">Male</option>
      <option value="Female">Female</option>
    </select>
    <button id="add-person-btn" type="button">Add Person</button>
  </div>
  <div id="people-list" aria-live="polite" style="margin-top:8px;"></div>
</section>

<section id="tasks-section">
  <h2>Tasks</h2>
  <div class="input-group">
    <input type="text" id="task-name" placeholder="Task name" />
    <input type="number" id="task-count" min="1" value="1" />
    <select id="task-type"><option value="kitchen">Kitchen</option><option value="work">Work</option></select>
    <button id="add-task-btn">Add Task</button>
  </div>
  <div class="table-scroll">
    <table id="tasks-table">
      <thead><tr><th>Task</th><th>Type</th><th>Count</th><th>Remove</th></tr></thead>
      <tbody></tbody>
    </table>
  </div>
</section>

<section id="schedule-section">
  <h2>Schedule</h2>
  <div class="table-scroll">
    <table id="schedule-table">
      <thead><tr><th>Day / Slot</th></tr></thead>
      <tbody></tbody>
    </table>
  </div>
</section>

<div class="input-group" style="margin-top:12px; gap:10px;">
  <button id="generate-btn">Generate Schedule</button>
  <button id="darkmode-btn" class="secondary">Toggle Dark Mode</button>
</div>

<script>
const days=["Mon","Tue","Wed","Thu","Fri","Sat","Sun"];
let people=[], tasks=[];
const peopleList=document.getElementById('people-list');
const tasksTable=document.querySelector('#tasks-table tbody');
const scheduleTable=document.querySelector('#schedule-table tbody');

function renderPeople(){
  peopleList.innerHTML='';
  people.forEach((p,i)=>{
    const div=document.createElement('div');
    div.className='person-list-item';
    div.textContent=p.name+" ("+p.gender+")";
    const btn=document.createElement('button');
    btn.textContent='Remove'; btn.className='remove-btn';
    btn.onclick=()=>{people.splice(i,1);renderPeople();};
    div.appendChild(btn);
    peopleList.appendChild(div);
  });
}

function renderTasks(){
  tasksTable.innerHTML='';
  tasks.forEach((t,i)=>{
    const tr=document.createElement('tr');
    ['name','type','count'].forEach(f=>{const td=document.createElement('td');td.textContent=t[f];tr.appendChild(td);});
    const removeTd=document.createElement('td');
    const btn=document.createElement('button'); btn.className='remove-btn'; btn.textContent='Remove';
    btn.onclick=()=>{tasks.splice(i,1);renderTasks();};
    removeTd.appendChild(btn); tr.appendChild(removeTd);
    tasksTable.appendChild(tr);
  });
}

function addPerson(){
  const name=document.getElementById('person-name').value.trim();
  const gender=document.getElementById('person-gender').value;
  if(name && !people.find(p=>p.name===name)){people.push({name,gender}); renderPeople();}
}
document.getElementById('add-person-btn').onclick=addPerson;

function addTask(){
  const name=document.getElementById('task-name').value.trim();
  const count=parseInt(document.getElementById('task-count').value)||1;
  const type=document.getElementById('task-type').value;
  if(name) {tasks.push({name,type,count}); renderTasks();}
}
document.getElementById('add-task-btn').onclick=addTask;

function generateSchedule(){
  scheduleTable.innerHTML='';
  // header with person names
  const thead=document.querySelector('#schedule-table thead tr');
  thead.innerHTML='<th>Day / Slot</th>';
  people.forEach(p=>{const th=document.createElement('th');th.textContent=p.name;thead.appendChild(th);});

  days.forEach(day=>{
    tasks.forEach(task=>{
      for(let i=0;i<task.count;i++){
        const tr=document.createElement('tr');
        if(i===0){const td=document.createElement('td');td.textContent=day+' — '+task.name;td.rowSpan=task.count; tr.appendChild(td);}
        else{const td=document.createElement('td');td.textContent=''; tr.appendChild(td);}
        people.forEach(p=>{const td=document.createElement('td'); td.className='schedule-cell'; td.setAttribute('draggable','true'); td.dataset.task=task.name; td.dataset.day=day;
          td.ondragstart=(e)=>{e.dataTransfer.setData('text/plain',p.name+'|'+task.name+'|'+day);};
          td.ondragover=(e)=>{e.preventDefault(); td.classList.add('drag-over');};
          td.ondragleave=()=>{td.classList.remove('drag-over');};
          td.ondrop=(e)=>{
            e.preventDefault(); td.classList.remove('drag-over');
            const data=e.dataTransfer.getData('text/plain').split('|');
            td.textContent='✓';
          };
        tr.appendChild(td);});
        scheduleTable.appendChild(tr);
      }
    });
  });
}
document.getElementById('generate-btn').onclick=generateSchedule;
document.getElementById('darkmode-btn').onclick=()=>{document.body.classList.toggle('dark');};
</script>
</body>
</html>
