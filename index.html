<!DOCTYPE html><html lang="en"><head><meta charset="utf-8"/><meta name="viewport" content="width=device-width,initial-scale=1"/><title>Weekly Work Scheduler</title><style>body{font-family:Arial,sans-serif;margin:20px auto;max-width:1200px;padding:0 10px;background-color:#f4f4f4;color:#333;transition:background .3s,color .3s}body.dark{background:#121212;color:#e0e0e0}h1,h2{text-align:left}input,select,button{margin:5px 0}section{background:white;padding:15px;margin-bottom:20px;border-radius:8px;box-shadow:0 2px 8px rgba(0,0,0,.1);transition:background .3s,color .3s}body.dark section{background:#1f1f1f}table{width:100%;border-collapse:collapse;margin-top:10px;display:block;overflow-x:auto}th,td{border:1px solid #ddd;padding:8px;text-align:center;min-width:50px;transition:background .3s,color .3s}th{background:#f2f2f2}body.dark th{background:#2c2c2c}tbody tr:nth-child(even){background:#f9f9f9}body.dark tbody tr:nth-child(even){background:#1a1a1a}tbody tr:hover{background:#e6f7ff}body.dark tbody tr:hover{background:#333}button{padding:6px 12px;border-radius:4px;border:none;background:#007BFF;color:#fff;cursor:pointer;transition:background .2s}button:hover{background:#0056b3}.remove-btn{background:red;color:#fff;padding:3px 6px;border-radius:3px}.remove-btn:hover{background:darkred}.task-label{margin-right:5px}.schedule-table td.kitchen-task{background:#d1e7dd}.schedule-table td.work-task{background:#f8d7da}.avail-cell{min-width:80px;padding:6px;cursor:pointer}.fairness-box{margin-top:12px;padding:8px;border-radius:8px;background:#eef6ff}@media(max-width:768px){table{display:block;overflow-x:auto}}</style></head><body><h1>Weekly Work Scheduler</h1><section id="people-section"><h2>People</h2><div class="input-group"><input type="text" id="person-name" placeholder="Enter name"><select id="person-gender"><option value="Male">Male</option><option value="Female">Female</option></select><button id="add-person-btn">Add Person</button></div><ul id="people-list"></ul></section><section id="kitchen-section"><h2>Kitchen Tasks</h2><div class="input-group"><input type="text" id="kitchen-task-name" placeholder="Enter task"><input type="number" id="kitchen-task-count" placeholder="People needed" min="1" value="1"><button id="add-kitchen-task-btn">Add Task</button></div><table id="kitchen-task-table"><thead><tr><th>Task</th><th>People Needed</th><th>Days Needed</th><th>Remove</th></tr></thead><tbody></tbody></table></section><section id="work-section"><h2>Work Duties</h2><div class="input-group"><input type="text" id="work-task-name" placeholder="Enter task"><input type="number" id="work-task-count" placeholder="People needed" min="1" value="1"><select id="work-task-gender"><option value="Any">Any</option><option value="Male">Male</option><option value="Female">Female</option></select><button id="add-work-task-btn">Add Task</button></div><table id="work-task-table"><thead><tr><th>Task</th><th>People Needed</th><th>Days Needed</th><th>Remove</th></tr></thead><tbody></tbody></table></section><section id="availability-section"><h2>Availability</h2><table id="availability-table"><thead><tr><th>Person</th><th>Mon</th><th>Tue</th><th>Wed</th><th>Thu</th><th>Fri</th><th>Sat</th><th>Sun</th></tr></thead><tbody></tbody></table><p style="font-size:13px;color:#666;margin-top:8px;">Click a cell to edit availability for that person/day (emoji = slot enabled).</p></section><div class="input-group"><button id="generate-btn">Generate Schedule</button><button id="clear-btn">Clear Schedule</button><button id="download-btn">Download CSV</button><button id="darkmode-btn">Toggle Dark Mode</button></div><section id="schedule-section"><h2>Generated Kitchen Schedule</h2><table id="kitchen-schedule-table" class="schedule-table"></table><h2>Generated Work Duties Schedule</h2><table id="work-schedule-table" class="schedule-table"></table><div id="fairness-summary" class="fairness-box" style="display:none;"><h3 style="margin:4px 0;">Fairness summary (assignments per person)</h3><div id="fairness-content"></div></div></section><script>let peopleList=JSON.parse(localStorage.getItem("peopleList"))||[],kitchenTasks=JSON.parse(localStorage.getItem("kitchenTasks"))||[],workTasks=JSON.parse(localStorage.getItem("workTasks"))||[],availability=JSON.parse(localStorage.getItem("availability"))||{};const days=["Mon","Tue","Wed","Thu","Fri","Sat","Sun"],kitchenSubTasks=["Breakfast","Lunch","Lunch Dishes","Dinner","Dinner Dishes"],allSlots=[...kitchenSubTasks,"Work Duty"],personInput=document.getElementById("person-name"),personGender=document.getElementById("person-gender"),addPersonBtn=document.getElementById("add-person-btn"),peopleUl=document.getElementById("people-list"),kitchenTaskInput=document.getElementById("kitchen-task-name"),kitchenTaskCount=document.getElementById("kitchen-task-count"),addKitchenTaskBtn=document.getElementById("add-kitchen-task-btn"),kitchenTaskTable=document.getElementById("kitchen-task-table").querySelector("tbody"),workTaskInput=document.getElementById("work-task-name"),workTaskCount=document.getElementById("work-task-count"),workTaskGender=document.getElementById("work-task-gender"),addWorkTaskBtn=document.getElementById("add-work-task-btn"),workTaskTable=document.getElementById("work-task-table").querySelector("tbody"),availabilityTable=document.getElementById("availability-table"),availabilityTbody=availabilityTable.querySelector("tbody"),generateBtn=document.getElementById("generate-btn"),clearBtn=document.getElementById("clear-btn"),downloadBtn=document.getElementById("download-btn"),darkmodeBtn=document.getElementById("darkmode-btn"),kitchenScheduleTable=document.getElementById("kitchen-schedule-table"),workScheduleTable=document.getElementById("work-schedule-table"),fairnessSummaryBox=document.getElementById("fairness-summary"),fairnessContent=document.getElementById("fairness-content"),slotEmoji={Breakfast:"ðŸ³",Lunch:"â˜€ï¸",Lunch Dishes:"ðŸ½ï¸",Dinner:"ðŸŒ™",Dinner Dishes:"ðŸ§¼",Work Duty:"ðŸ’¼"};function saveData(){localStorage.setItem("peopleList",JSON.stringify(peopleList)),localStorage.setItem("kitchenTasks",JSON.stringify(kitchenTasks)),localStorage.setItem("workTasks",JSON.stringify(workTasks)),localStorage.setItem("availability",JSON.stringify(availability))}function shuffle(a){return a.sort(()=>Math.random()-.5)}function ensureAvailabilityStructure(){peopleList.forEach(p=>{availability[p.name]=availability[p.name]||{};days.forEach(d=>{availability[p.name][d]=availability[p.name][d]||{};allSlots.forEach(s=>{availability[p.name][d][s]===undefined&&(availability[p.name][d][s]=!0)})})})}addPersonBtn.addEventListener("click",()=>{const e=personInput.value.trim(),t=personGender.value;if(!e)return alert("Name required");if(peopleList.find(p=>p.name===e))return alert("Person already exists");peopleList.push({name:e,gender:t}),availability[e]=availability[e]||{},days.forEach(d=>{availability[e][d]=availability[e][d]||{};allSlots.forEach(s=>{availability[e][d][s]===undefined&&(availability[e][d][s]=!0)})}),saveData(),renderPeople(),renderAvailability(),personInput.value=""});function removePerson(e){if(!confirm(`Remove ${e}?`))return;const t=peopleList.findIndex(p=>p.name===e);t>-1&&(peopleList.splice(t,1),delete availability[e],saveData(),renderPeople(),renderAvailability())}function renderPeople(){peopleUl.innerHTML="",peopleList.forEach(e=>{const t=document.createElement("li");t.textContent=`${e.name} (${e.gender}) `;const n=document.createElement("button");n.textContent="Remove",n.className="remove-btn",n.onclick=()=>removePerson(e.name),t.appendChild(n),peopleUl.appendChild(t)})}function renderTasks(e,t){t.innerHTML="",e.forEach((n,r)=>{const l=document.createElement("tr"),i=document.createElement("td");i.textContent=n.name,l.appendChild(i);const o=document.createElement("td"),c=document.createElement("input");c.type="number",c.value=n.count,c.min=1,c.onchange=()=>{n.count=parseInt(c.value)||1,saveData()},o.appendChild(c),l.appendChild(o);const d=document.createElement("td");days.forEach(e=>{const t=document.createElement("label");t.className="task-label";const n=document.createElement("input");n.type="checkbox",n.checked=!!n.days&&!!n.days[e],n.onchange=()=>{n.days=n.days||{},n.days[e]=n.checked,saveData()},t.appendChild(n),t.appendChild(document.createTextNode(e[0])),d.appendChild(t)}),l.appendChild(d);const u=document.createElement("td"),f=document.createElement("button");f.textContent="Remove",f.className="remove-btn",f.onclick=()=>{e.splice(r,1),renderTasks(e,t),saveData()},u.appendChild(f),l.appendChild(u),t.appendChild(l)})}addKitchenTaskBtn.addEventListener("click",()=>{const e=kitchenTaskInput.value.trim(),t=parseInt(kitchenTaskCount.value)||1;if(!e)return alert("Task name required");const n={name:e,count:t,days:{}};days.forEach(e=>n.days[e]=!0),kitchenTasks.push(n),saveData(),renderTasks(kitchenTasks,kitchenTaskTable),kitchenTaskInput.value="",kitchenTaskCount.value=1}),addWorkTaskBtn.addEventListener("click",()=>{const e=workTaskInput.value.trim(),t=parseInt(workTaskCount.value)||1,n=workTaskGender.value;if(!e)return alert("Task name required");const r={name:e,count:t,days:{},genderRequired:n};days.forEach(e=>r.days[e]=!1),workTasks.push(r),saveData(),renderTasks(workTasks,workTaskTable),workTaskInput.value="",workTaskCount.value=1,workTaskGender.value="Any"}),renderAvailability=function(){ensureAvailabilityStructure();let e=availabilityTable.querySelector("thead");e||(e=document.createElement("thead"),availabilityTable.appendChild(e)),e.innerHTML="";const t=e.insertRow();t.insertCell().textContent="Person",days.forEach(e=>t.insertCell().textContent=e),availabilityTbody.innerHTML="",peopleList.forEach(n=>{const r=document.createElement("tr"),l=document.createElement("td");l.textContent=n.name,r.appendChild(l),days.forEach(e=>{const t=document.createElement("td");t.className="avail-cell",t.style.cursor="pointer",t.style.minWidth="80px",t.style.padding="6px",t.style.textAlign="center";const l=allSlots.filter(t=>!!availability[n.name][e][t]);t.innerHTML=l.map(t=>`<span title="${t}" style="margin:0 2px; font-size:16px;">${slotEmoji[t]||t[0]}</span>`).join(""),t.onclick=()=>openAvailabilityModal(n.name,e,t),r.appendChild(t)}),availabilityTbody.appendChild(r)})},ensureAvailabilityStructure(),renderPeople(),renderTasks(kitchenTasks,kitchenTaskTable),renderTasks(workTasks,workTaskTable),renderAvailability(),darkmodeBtn&&darkmodeBtn.addEventListener("click",()=>document.body.classList.toggle("dark"));(function(){const e=document.createElement("section");e.style.background="#fff8e1",e.style.border="2px solid #ffeb3b",e.style.borderRadius="8px",e.style.padding="10px",e.style.marginTop="20px",e.innerHTML='<h3 style="color:#ff6f00;margin:0 0 6px 0;">Reset All Data</h3><p style="margin:0 0 8px 0;">This will permanently clear all saved people, tasks and availability.</p><button id="reset-all-btn" style="background:#ff9800;padding:6px 10px;border-radius:6px;border:none;color:white;cursor:pointer;">Reset All Data</button>',document.body.appendChild(e),document.getElementById("reset-all-btn").addEventListener("click",function(){if(confirm("Are you sure you want to reset ALL saved data?")){localStorage.clear(),peopleList=[],kitchenTasks=[],workTasks=[],availability={},renderPeople(),renderTasks(kitchenTasks,kitchenTaskTable),renderTasks(workTasks,workTaskTable),renderAvailability(),kitchenScheduleTable.innerHTML="",workScheduleTable.innerHTML="",fairnessSummaryBox.style.display="none",alert("All data cleared.")}})})();</script></body></html>
